name: model training
description: Train a pytorch model
inputs:
    - name: base_artifact_path
      description: base path to store data
      type: String
    - name: preprocessed_dataset_path
      description: path to the preprocessed dataset
      type: String
    - name: timestamp
      description: timestamp as id for the pipeline
      type: Integer
outputs:
    - name: trained_model
      description: trained model file
      type: String
implementation:
    container:
        image: us-central1-docker.pkg.dev/apache-beam-testing/kfp-components-preprocessing/train:latest
        command: [
            python3,
            ingest.py,
            --base-artifact-path,
            {inputValue: base_artifact_path},
            --timestamp,
            {inputValue: timestamp},
            --preprocessed-dataset-path,
            {outputPath: preprocessed_dataset_path}
        ]